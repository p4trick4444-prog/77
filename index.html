<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â™¥ 77æœ•å¤©ä¸‹å°ˆå±¬ â™¥ è³½ç‰¹çˆ†åˆ†æ©Ÿç‡æˆ¿</title>

<style>
:root{
    --main:#c9a3ff;
    --light:#e6d7ff;
    --glow:rgba(201,163,255,.95);
    --particle:rgba(240,230,255,.75);
}

/* ğŸ”´ ç‰ˆæœ¬ Iï¼šç´…è‰² */
body.ver-I{
    --main:#ff3b3b;
    --light:#ff9a9a;
    --glow:rgba(255,60,60,1);
    --particle:rgba(255,210,210,.7);
}

body{
    font-family:"Microsoft JhengHei",Arial,sans-serif;
    background:center/cover fixed no-repeat;
    margin:0;
    padding:14px;
    color:#fff;
    display:flex;
    justify-content:center;
    min-height:100vh;
    overflow:hidden;
}

/* èƒŒæ™¯åœ–ç‰‡å±¤ */
body::before{
    content:"";
    position:fixed;
    inset:0;
    background:center/cover no-repeat;
    opacity:0;
    transition:.8s;
    z-index:-3;
}
body.bg-fade::before{opacity:1;}

@keyframes bgBeat{
    0%,100%{background-size:100%}
    50%{background-size:105%}
}

#particles{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:-2;
}
.particle{
    position:absolute;
    width:6px;
    height:6px;
    border-radius:50%;
    background:var(--particle);
    animation:float linear infinite;
}
@keyframes float{
    from{transform:translateY(0);opacity:.6}
    to{transform:translateY(-120vh);opacity:0}
}

.container{max-width:1000px;width:100%;text-align:center}

h1{
    color:var(--main);
    text-shadow:0 0 18px var(--glow);
}

/* æŒ‰éˆ• */
button{
    width:200px;
    margin:6px;
    padding:12px;
    border:none;
    border-radius:16px;
    font-weight:bold;
    color:#fff;
    background:linear-gradient(to bottom,var(--light),var(--main));
    box-shadow:0 6px 18px rgba(0,0,0,.55);
    cursor:pointer;
}
button:disabled{opacity:.6}

/* è®€å–æ¢ */
.progress-wrap{
    width:100%;
    max-width:520px;
    height:34px;
    margin:18px auto;
    background:rgba(0,0,0,.55);
    border-radius:20px;
    overflow:hidden;
    display:none;
}
.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,var(--light),var(--main));
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    font-weight:bold;
    transition:.3s;
}

/* æˆ¿é–“ */
.slot-container{
    display:none;
    grid-template-columns:repeat(3,1fr);
    gap:14px;
}
.slot{
    background:rgba(10,10,10,.9);
    padding:14px;
    border-radius:12px;
    display:flex;
    justify-content:space-between;
    opacity:0;
    transform:translateY(20px);
    transition:.4s;
}
.slot.show{opacity:1;transform:none}

/* å¤§ç */
.highest{
    border:2px solid var(--main);
    box-shadow:0 0 35px var(--glow);
    animation:pulse 1.2s infinite;
}
@keyframes pulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.05)}
}

/* äºŒç */
.high{
    border:2px solid #fff;
    color:#fff;
    box-shadow:0 0 25px rgba(255,255,255,.95);
}

@media(max-width:768px){
    .slot-container{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:480px){
    .slot-container{grid-template-columns:1fr}
    button{width:100%}
}
</style>
</head>

<body class="ver-II">
<div id="particles"></div>

<div class="container">
<h1 id="title">â™¥ 77æœ•å¤©ä¸‹å°ˆå±¬ â™¥ è³½ç‰¹IIçˆ†åˆ†æ©Ÿç‡æˆ¿</h1>

<div>
<button id="countBtn" onclick="refresh()">äº”åˆ†é˜æ›ä¸€æ¬¡ â™¥</button>
<button onclick="toggleVer()">åˆ‡æ›ç‰ˆæœ¬</button>
</div>

<div id="progressWrap" class="progress-wrap">
    <div id="progressBar" class="progress-bar">
        <span id="progressText">çˆ†åˆ†æ©Ÿç‡è¨ˆç®—ä¸­â€¦</span>
    </div>
</div>

<div id="slots" class="slot-container"></div>
</div>

<script>
let version="II";
let cooling=false;

function changeBg(img){
    document.body.style.backgroundImage=`url("${img}")`;
    document.body.classList.add("bg-fade");
    setTimeout(()=>document.body.classList.remove("bg-fade"),800);
}

function particles(n=60){
    const p=document.getElementById("particles");
    p.innerHTML="";
    for(let i=0;i<n;i++){
        let d=document.createElement("div");
        d.className="particle";
        d.style.left=Math.random()*100+"%";
        d.style.bottom=Math.random()*100+"%";
        d.style.animationDuration=5+Math.random()*10+"s";
        p.appendChild(d);
    }
}

function rand(n,m){return Math.floor(Math.random()*(m-n+1))+n}

function generate(){
    slots.innerHTML="";
    slots.style.display="grid";
    progressWrap.style.display="block";
    progressBar.style.width="0%";
    progressText.innerText="çˆ†åˆ†æ©Ÿç‡è¨ˆç®—ä¸­â€¦";

    let data=[];
    for(let i=0;i<3;i++)data.push({r:rand(1,3000),p:rand(85,92),c:"highest"});
    for(let i=0;i<12;i++)data.push({r:rand(1,3000),p:rand(70,84),c:"high"});
    while(data.length<30)data.push({r:rand(1,3000),p:rand(50,69),c:""});

    let done=0;
    data.forEach((d,i)=>{
        let div=document.createElement("div");
        div.className="slot "+d.c;
        div.innerHTML=`<span>ç¬¬ ${d.r} æˆ¿</span><span>${d.p}%</span>`;
        slots.appendChild(div);

        setTimeout(()=>{
            div.classList.add("show");
            done++;
            let per=Math.floor(done/data.length*100);
            progressBar.style.width=per+"%";
            if(done===data.length){
                progressText.innerText="çˆ†åˆ†æ©Ÿç‡è¨ˆç®—å®Œæˆ â™¥";
            }
        },i*50);
    });
}

function refresh(){
    if(cooling)return;
    generate();
    cooling=true;
    let t=300;
    let btn=countBtn;
    btn.disabled=true;
    let timer=setInterval(()=>{
        t--;
        btn.innerText=`â™¥ ${String(t/60|0).padStart(2,"0")}:${String(t%60).padStart(2,"0")} â™¥`;
        if(t<=0){
            clearInterval(timer);
            cooling=false;
            btn.disabled=false;
            btn.innerText="äº”åˆ†é˜æ›ä¸€æ¬¡ â™¥";
        }
    },1000);
}

function toggleVer(){
    version=version==="II"?"I":"II";
    document.body.className=version==="I"?"ver-I":"ver-II";
    title.innerText=`â™¥ 77æœ•å¤©ä¸‹å°ˆå±¬ â™¥ è³½ç‰¹${version}çˆ†åˆ†æ©Ÿç‡æˆ¿`;
    changeBg(version==="I"?"bg1.jpg":"bg2.jpg");
    generate();
}

window.onload=()=>{
    changeBg("bg2.jpg");
    particles();
    generate();
};
</script>
</body>
</html>
